---
name: kubemin-console
description: Help users develop the KubeMin-Console frontend (Web UI / console) in a more standardized manner.
metadata:
  short-description: Supporting the frontend development of KubeMin-Console
---

## Scope

本 Skill 定义协作规范，用于辅助 **KubeMin-Console 前端**（Web UI/控制台/页面/组件/样式/交互）开发与交付，包括：沟通规范、变更流程、质量自检要求、命名与工程质量、UI 设计协作约束、PR 规范等。

---

## 0) High-priority rule：优先低风险单轮交付（但 UI 设计除外）

- **低风险代码改动**优先单轮交付：同一回复内完成方案说明、实现与 PR 文本建议（如适用）。
- **UI/UX 设计类任务不适用“直接开干”**：必须先把需求问清楚再输出设计/示例图/组件结构（见第 2.1 节）。

低风险定义（必须全部满足）：

- 不改变用户可感知的页面行为/交互语义/视觉规范（含布局、间距、字号、颜色、动效节奏、可用性与无障碍语义）。
- 不改变对外接口契约（请求/响应字段含义、错误处理分支、鉴权/权限语义）与关键数据流（埋点、权限、路由守卫）。
- 不涉及复杂状态管理重构、并发/竞态（例如多请求竞争、取消/重试策略）、安全边界（XSS/CSRF/权限绕过）或性能关键路径。
- 影响范围局部、易回滚（单组件/单页面/单模块）。

效率规则（在保证质量前提下）：

- 对“信息不足但风险仍低”的任务：允许基于清晰写明的假设直接交付；仅当假设可能影响正确性/安全性/公共行为时才提问。
- 同一会话内用户提出多个低风险点改动：合并交付（合并计划与改动点、合并自检清单、合并 PR 文本）。

---

## 1) 中文沟通

- 默认使用**中文**与用户沟通。
- 若用户明确要求某个产物使用英文（例如 UI 文案、commit message），仅对该产物使用英文。

---

## 2) 风险分级：先分析，再动手；确认策略按风险

### 2.0 代码改动（非设计类）的通用要求

在进行代码修改前，必须先说明：

- 要实现的需求点
- 将修改的模块/文件/组件/函数/路由/状态
- 可能的副作用（兼容性、回归点、性能、无障碍、跨端差异）
- 实现策略（高层级即可）

确认策略：

- **低风险**：给出简要方案后同轮直接实现。
- **中/高风险**：必须请求用户明确确认后再实现。

中/高风险典型场景（任一满足即是）：

- 改动交互范式或视觉规范（布局/主题/组件库用法/动画节奏），可能引发大面积回归。
- 改动路由结构、权限守卫、登录态策略、缓存策略、请求重试/取消、错误呈现规则。
- 引入/替换基础设施：状态管理框架、请求层封装、组件库、构建配置、国际化方案、埋点体系。
- 安全与合规相关：富文本渲染、用户输入处理、链接跳转策略、权限绕过风险。
- 性能关键路径：大列表渲染、首屏加载、代码分割策略、资源体积变化显著。

### 2.1 UI/UX 设计任务：必须先问清楚再设计（强制）

凡是用户要求“设计页面/组件/样式/示例图/视觉稿/交互稿/像素级还原”等，必须先收敛需求。至少确认以下信息（缺失项必须发问，除非用户已提供）：

- 目标与范围：要解决什么问题、覆盖哪些页面/状态（空态/加载/错误/禁用/权限不足）
- 平台与环境：Web/移动端/响应式范围、浏览器要求、是否对标某组件库
- 尺寸与栅格：画布尺寸（如 1440/1280/375）、间距体系（8pt/4pt）、断点
- 视觉规范：品牌色/字体/圆角/阴影/边框、暗色模式与对比度要求
- 交互细节：hover/focus/active、过渡时长、动效曲线、键盘可达性
- 参考与约束：参考链接/截图、必须保留/禁止的元素、可复用的现有组件
- 交付物形式：仅代码实现 / 结构草图 / 组件清单 / 像素级示例图（见 2.2）

> 规则：在上述信息未明确前，不输出“最终定稿式设计”。可以先输出“方案选项 + 需要确认点 + 风险说明”。

### 2.2 示例图/还原类请求：尽可能 1:1 复原（强制）

当用户要求提供示例图、或给出截图/规格并要求“复原/还原/像素级一致”时：

- **优先 1:1 复原**：布局、尺寸、比例、圆角、阴影、间距、字号、行高、图标大小、组件密度必须严格按用户提供信息执行。
- 如果用户提供了明确数值（px/rem、间距、字体、容器宽高、对齐规则），不得“近似猜测”替代。
- 若缺少关键尺寸/比例信息，必须先补问；或在输出中逐条标注“哪些值是根据现有信息推导/近似”的范围与原因。
- 交付中应包含可验证口径：例如关键元素的尺寸表、间距表、字体表、栅格与对齐基线，便于用户核对。

---

## 3) 质量自检要求（替代测试用例）

当前前端项目**不要求编写测试用例**，但每次代码修改完成后，必须执行并报告自检结果。自检要求包括且不限于：

- **页面可正常访问**：相关路由/页面能在本地或目标环境打开，关键交互流程可触达（至少覆盖本次改动影响范围）。
- **无包引用错误**：构建/启动过程中不应出现 import/依赖解析错误、循环依赖、缺失模块等问题。
- **控制台无报错**：浏览器 Console 不应出现 error 级别报错（包含运行时异常、资源加载失败导致的错误、React/Vue 关键报错等）。

建议自检清单（按项目栈选择性执行）：

- 启动开发服务器后，访问涉及页面与关键状态（正常/空态/错误态/加载态）。
- 打开 DevTools：检查 Console（errors）与 Network（失败请求/跨域/401/403）。
- 检查路由跳转与权限守卫（若改动涉及）。
- 若改动影响构建：至少跑一次 `build`（或等价命令）确保产物可生成。

---

## 4) 命名与结构必须遵循项目约定

- 所有新增或修改的：目录、文件、组件、hooks、状态、类型、常量、样式命名，必须与仓库现有风格保持一致。
- 若仓库规范不清晰：
  - 组件：`PascalCase`
  - hooks：`useXxx`
  - 变量/函数：`camelCase`
  - 常量：`UPPER_SNAKE_CASE`（仅用于真正的常量与枚举值）
  - 类型：`PascalCase`，避免 `I*` 前缀（除非项目已有此约定）

---

## 5) 前端代码质量：简洁、可维护、可访问、可性能化

- 简洁优先：避免过度抽象；优先小组件、清晰边界、单一职责。
- 类型安全：优先显式类型与可读的类型收敛；避免无约束 `any`（除非有清晰隔离与注释）。
- 可访问性（A11y）：语义化标签、键盘可达、focus 可见、对比度与 aria 必要属性。
- 性能：避免不必要的重渲染、注意列表虚拟化/懒加载/代码分割；警惕大对象依赖与深层 props 传递。
- 安全：用户输入必须转义/白名单；富文本渲染需明确安全策略；外链跳转与 URL 拼接需谨慎。
- 避免魔法值：可复用的尺寸、间距、颜色、z-index、动画时长应沉淀为 token/常量（遵循项目现有方式）。

实现后自检（必做）：

- 删除重复代码与无用分支
- 减少嵌套与隐式副作用
- 统一错误处理与空态/加载态呈现
- 复核移动端/响应式与暗色模式（如适用）

---

## 6) Pull Request 描述格式（GitHub 风格）

建议 PR 标题与正文时：

- 标题：清晰、祈使句、概括核心改动
- 正文（按需）：Summary / Changes / Self-check / Notes
- 禁止在 PR 文本中使用字面量转义符（例如 `\n`）；必须用真实换行

---

## 7) PR 新增 commit 后的描述更新（条件触发）

- 若后续 commit 改变了 PR 范围或行为，必须同步更新 PR 标题/正文；
- 仅在影响以下内容时更新：
  - 用户可见行为/交互/视觉规范
  - 接口对接与数据流
  - 自检口径与风险说明

---

## 8) 对接接口/Mock/埋点（前端特有的“契约同步”）

当改动涉及 API 对接、mock 数据、埋点事件时：

- 必须同步更新相关的：
  - 请求/响应类型定义（或 schema）
  - mock/fixture（例如 MSW、mock server、假数据生成）
  - 埋点事件名、属性字段与触发时机（如项目存在埋点约定）
- 若变更可能影响后端或数据分析口径，视为中/高风险，需先与用户确认。

---

## Deliverables checklist（每次变更请求）

- [ ] 全程中文沟通（除非用户指定某产物英文）
- [ ] 先分析再改动；按风险决定是否需要确认
- [ ] UI/UX 设计类任务：先问清楚再输出设计（强制）
- [ ] 示例图/复原：尽可能 1:1 还原，尺寸/比例/样式严格对齐用户描述
- [ ] 完成质量自检：页面可访问 / 无包引用错误 / 控制台无报错
- [ ] 提供 PR 标题/正文建议（如用户需要或场景适用）
